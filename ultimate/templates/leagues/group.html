{% extends "layout/layout_user.html" %}
{% load leagues %}
{% load teams %}

{% block content %}
	<h1>
	    Edit Group for {{ league.night|capfirst }} {{ league.season|capfirst }} {{ league.year }}
	</h1>

	<p>This league allows groups of up to {{ league.baggage }} (including you).</p>

	<h2>Your current group is{% if not registration.baggage.get_registrations %} empty.{% endif %}</h2>

	<ol>
		{% for baggage_reg in registration.baggage.get_registrations %}
			<li>{{ baggage_reg.user.get_full_name }}</li>
		{% endfor %}
	</ol>

	{% if league.baggage > 1 and not registration.league.freeze_group_date|is_past_deadline %}
		<form method="POST">{% csrf_token %}
			<input class="button button_error" type="submit" name="leave_group" value="Leave Group" />
		</form>

		<form method="POST">{% csrf_token %}
			{% if league|num_spots_left:registration.baggage.get_registrations > 0 %}
				<h2>Add Another Player To Your Group</h2>
				<p>You have room for {{ league|num_spots_left:registration.baggage.get_registrations }} more players in your group. Enter the email of the player you would like to add below.</p>

				<div class="control_group">
					<input name="email" type="text" />
				</div>

				<input class="button button_success" name="add_group" value="Add Player" type="submit" />
			{% else %}
				<h3>Your group is full for this league.</h3>
			{% endif %}
		</form>
	{% endif %}

{% endblock %}