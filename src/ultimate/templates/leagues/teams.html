{% extends 'layout/layout_user.html' %}

{% load staticfiles %}
{% load teams %}
{% load user_roles %}
{% load utility %}

{% block title %}Teams and Schedules &middot; {% include '_partials/division_header.html' with league=league hide_state=1 only %} &middot; {{ block.super }}{% endblock %}
{% block og_title %}Teams and Schedules &middot; {% include '_partials/division_header.html' with league=league hide_state=1 only %} &middot; {{ block.super }}{% endblock %}

{% block content %}
<div class="page-division-teams">

  <h1>{% include '_partials/division_header.html' with league=league only %}</h1>

  {% include '_partials/league_tabs.html' with selected_tab='teams' %}

  {% if not teams and not game_locations %}
    <div class="message">
      Teams and schedules are not yet available.
    </div>
  {% endif %}

  <div class="page-division-teams-schedule">
    {% if game_locations %}
      {% include '_partials/schedule_table.html' with league=league game_locations=game_locations game_dates=game_dates user_games=user_games next_game_date=next_game_date only %}

      {% if league.schedule_note %}
        <div class="message message-info">
          <h4>Scheduling Note</h4>
          {{ league.schedule_note }}
        </div>
      {% endif %}
    {% endif %}
  </div>

  {% if game_locations and not teams %}
    <div class="message">
      Teams are not yet available.
    </div>
  {% endif %}

  <div class="page-division-teams-teams">
    {% if teams %}
      <div class="page-division-teams-teams-row">
        {% for team in teams %}
          <div class="page-division-teams-teams-row-team" id="team-roster-{{ team.id }}">
            {% include '_partials/team_card.html' with team=team user=request.user only %}
          </div>

          {% if forloop.counter|divisibleby:2 %}
            </div><div class="page-division-teams-teams-row">
          {% endif %}
        {% endfor %}
      </div>
    {% endif %}
  </div>

  {% if teams and request.user.is_superuser or request.user|in_group:'junta' %}
    <div class="page-division-teams-notes">
      <h4 class="page-division-teams-notes-title">
        Admin Only
      </h4>

      <div class="page-division-teams-notes-content">
        <dl>
          <dt>Division Email Address:</dt>
          <dd>
            {% if league.division_email %}
              <a href="mailto:{{ league.division_email }}">
                {{ league.division_email }}
              </a>
            {% else %}
              None
            {% endif %}
          </dd>
          <dt>Division Captains Email Address:</dt>
          <dd>
            {% if league.division_captains_email %}
              <a href="mailto:{{ league.division_captains_email }}">
                {{ league.division_captains_email }}
              </a>
            {% else %}
              None
            {% endif %}
          </dd>
        </dl>
      </div>
    </div>
  {% endif %}
</div>
{% endblock %}
